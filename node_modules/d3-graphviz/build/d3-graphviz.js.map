{"version":3,"file":"d3-graphviz.js","sources":["../src/element.js","../src/utils.js","../src/zoom.js","../src/tweening.js","../src/data.js","../src/render.js","../src/graphvizVersion.js","../src/svg.js","../src/dot.js","../src/renderDot.js","../src/transition.js","../src/options.js","../src/width.js","../src/height.js","../src/scale.js","../src/fit.js","../src/attributer.js","../src/engine.js","../src/images.js","../src/keyMode.js","../src/fade.js","../src/tweenPaths.js","../src/tweenShapes.js","../src/convertEqualSidedPolygons.js","../src/tweenPrecision.js","../src/growEnteringEdges.js","../src/on.js","../src/onerror.js","../src/logEvents.js","../src/destroy.js","../src/geometry.js","../src/drawEdge.js","../src/drawNode.js","../src/workerCode.js","../src/graphviz.js","../src/selection/graphviz.js","../src/selection/selectWithoutDataPropagation.js","../src/selection/index.js"],"sourcesContent":["import * as d3 from \"d3-selection\";\n\nexport function extractElementData(element) {\n\n    var datum = {};\n    var tag = element.node().nodeName;\n    datum.tag = tag;\n    if (tag == '#text') {\n        datum.text = element.text();\n    } else if (tag == '#comment') {\n        datum.comment = element.text();\n    }\n    datum.attributes = {};\n    var attributes = element.node().attributes;\n    if (attributes) {\n        for (var i = 0; i < attributes.length; i++) {\n            var attribute = attributes[i];\n            var name = attribute.name;\n            var value = attribute.value;\n            datum.attributes[name] = value;\n        }\n    }\n    var transform = element.node().transform;\n    if (transform && transform.baseVal.numberOfItems != 0) {\n        var matrix = transform.baseVal.consolidate().matrix;\n        datum.translation = {x: matrix.e, y: matrix.f};\n        datum.scale = matrix.a;\n    }\n    if (tag == 'ellipse') {\n        datum.center = {\n            x: datum.attributes.cx,\n            y: datum.attributes.cy,\n        };\n    }\n    if (tag == 'polygon') {\n        var points = element.attr('points').split(' ');\n        var x = points.map(function(p) {return p.split(',')[0]});\n        var y = points.map(function(p) {return p.split(',')[1]});\n        var xmin = Math.min.apply(null, x);\n        var xmax = Math.max.apply(null, x);\n        var ymin = Math.min.apply(null, y);\n        var ymax = Math.max.apply(null, y);\n        var bbox = {\n            x: xmin,\n            y: ymin,\n            width: xmax - xmin,\n            height: ymax - ymin,\n        };\n        datum.bbox = bbox;\n        datum.center = {\n            x: (xmin + xmax) / 2,\n            y: (ymin + ymax) / 2,\n        };\n    }\n    if (tag == 'path') {\n        var d = element.attr('d');\n        var points = d.split(/[A-Z ]/);\n        points.shift();\n        var x = points.map(function(p) {return +p.split(',')[0]});\n        var y = points.map(function(p) {return +p.split(',')[1]});\n        var xmin = Math.min.apply(null, x);\n        var xmax = Math.max.apply(null, x);\n        var ymin = Math.min.apply(null, y);\n        var ymax = Math.max.apply(null, y);\n        var bbox = {\n            x: xmin,\n            y: ymin,\n            width: xmax - xmin,\n            height: ymax - ymin,\n        };\n        datum.bbox = bbox;\n        datum.center = {\n            x: (xmin + xmax) / 2,\n            y: (ymin + ymax) / 2,\n        };\n        datum.totalLength = element.node().getTotalLength();\n    }\n    if (tag == 'text') {\n        datum.center = {\n            x: element.attr('x'),\n            y: element.attr('y'),\n        };\n    }\n    if (tag == '#text') {\n        datum.text = element.text();\n    } else if (tag == '#comment') {\n        datum.comment = element.text();\n    }\n    return datum\n}\n\nexport function extractAllElementsData(element) {\n\n    var datum = extractElementData(element);\n    datum.children = [];\n    var children = d3.selectAll(element.node().childNodes);\n    children.each(function () {\n        var childData = extractAllElementsData(d3.select(this));\n        childData.parent = datum;\n        datum.children.push(childData);\n    });\n    return datum;\n}\n\nexport function createElement(data) {\n\n    if (data.tag == '#text') {\n        return document.createTextNode(\"\");\n    } else if (data.tag == '#comment') {\n        return document.createComment(data.comment);\n    } else {\n        return document.createElementNS('http://www.w3.org/2000/svg', data.tag);\n    }\n}\n\nexport function createElementWithAttributes(data) {\n\n    var elementNode = createElement(data);\n    var element = d3.select(elementNode);\n    var attributes = data.attributes;\n    for (var attributeName of Object.keys(attributes)) {\n        var attributeValue = attributes[attributeName];\n        element.attr(attributeName, attributeValue);\n    }\n    return elementNode;\n}\n\nexport function replaceElement(element, data) {\n    var parent = d3.select(element.node().parentNode);\n    var newElementNode = createElementWithAttributes(data);\n    var newElement = parent.insert(function () {\n        return newElementNode;\n    }, function () {\n        return element.node();\n    });\n    element.remove();\n    return newElement;\n}\n\nexport function insertElementData(element, datum) {\n    element.datum(datum);\n    element.data([datum], function (d) {\n        return d.key;\n    });\n}\n\nexport function insertAllElementsData(element, datum) {\n    insertElementData(element, datum);\n    var children = d3.selectAll(element.node().childNodes);\n    children.each(function (d, i) {\n        insertAllElementsData(d3.select(this), datum.children[i]);\n    });\n}\n\nfunction insertChildren(element, index) {\n    var children = element.selectAll(function () {\n        return element.node().childNodes;\n    });\n\n    children = children\n      .data(function (d) {\n          return d.children;\n      }, function (d) {\n        return d.tag + '-' + index;\n      });\n    var childrenEnter = children\n      .enter()\n      .append(function(d) {\n          return createElement(d);\n      });\n\n    var childrenExit = children\n      .exit();\n    childrenExit = childrenExit\n        .remove()\n    children = childrenEnter\n        .merge(children);\n    var childTagIndexes = {};\n    children.each(function(childData) {\n        var childTag = childData.tag;\n        if (childTagIndexes[childTag] == null) {\n          childTagIndexes[childTag] = 0;\n        }\n        var childIndex = childTagIndexes[childTag]++;\n        attributeElement.call(this, childData, childIndex);\n    });\n}\n\nexport function attributeElement(data, index=0) {\n    var element = d3.select(this);\n    var tag = data.tag;\n    var attributes = data.attributes;\n    var currentAttributes = element.node().attributes;\n    if (currentAttributes) {\n        for (var i = 0; i < currentAttributes.length; i++) {\n            var currentAttribute = currentAttributes[i];\n            var name = currentAttribute.name;\n            if (name.split(':')[0] != 'xmlns' && currentAttribute.namespaceURI) {\n                var namespaceURIParts = currentAttribute.namespaceURI.split('/');\n                var namespace = namespaceURIParts[namespaceURIParts.length - 1];\n                name = namespace + ':' + name;\n            }\n            if (!(name in attributes)) {\n                attributes[name] = null;\n            }\n        }\n    }\n    for (var attributeName of Object.keys(attributes)) {\n        element\n            .attr(attributeName, attributes[attributeName]);\n    }\n    if (data.text) {\n        element\n            .text(data.text);\n    }\n    insertChildren(element, index);\n}\n","export function shallowCopyObject(obj) {\n    return Object.assign({}, obj);\n}\n\nexport function roundTo2Decimals(x) {\n    return Math.round(x * 100.0) / 100.0\n}\n","import * as d3 from \"d3-selection\";\nimport {zoom, zoomTransform, zoomIdentity} from \"d3-zoom\";\nimport {interpolate} from \"d3-interpolate\";\n\nexport default function(enable) {\n\n    this._options.zoom = enable;\n\n    if (this._options.zoom && !this._zoomBehavior) {\n        createZoomBehavior.call(this);\n    } else if (!this._options.zoom && this._zoomBehavior) {\n        this._zoomSelection.on(\".zoom\", null);\n        this._zoomBehavior = null;\n    }\n\n    return this;\n}\n\nexport function createZoomBehavior() {\n\n    var graphvizInstance = this;\n    function zoomed(event) {\n        var g = d3.select(svg.node().querySelector(\"g\"));\n        g.attr('transform', event.transform);\n        graphvizInstance._dispatch.call('zoom', graphvizInstance);\n    }\n\n    var root = this._selection;\n    var svg = d3.select(root.node().querySelector(\"svg\"));\n    if (svg.size() == 0) {\n        return this;\n    }\n    this._zoomSelection = svg;\n    var zoomBehavior = zoom()\n        .scaleExtent(this._options.zoomScaleExtent)\n        .translateExtent(this._options.zoomTranslateExtent)\n        .interpolate(interpolate)\n        .on(\"zoom\", zoomed);\n    this._zoomBehavior = zoomBehavior;\n    var g = d3.select(svg.node().querySelector(\"g\"));\n    svg.call(zoomBehavior);\n    if (!this._active) {\n        translateZoomBehaviorTransform.call(this, g);\n    }\n    this._originalTransform = zoomTransform(svg.node());\n\n    return this;\n};\n\nexport function getTranslatedZoomTransform(selection) {\n\n    // Get the current zoom transform for the top level svg and\n    // translate it uniformly with the given selection, using the\n    // difference between the translation specified in the selection's\n    // data and it's saved previous translation. The selection is\n    // normally the top level g element of the graph.\n    var oldTranslation = this._translation;\n    var oldScale = this._scale;\n    var newTranslation = selection.datum().translation;\n    var newScale = selection.datum().scale;\n    var t = zoomTransform(this._zoomSelection.node());\n    if (oldTranslation) {\n        t = t.scale(1 / oldScale);\n        t = t.translate(-oldTranslation.x, -oldTranslation.y);\n    }\n    t = t.translate(newTranslation.x, newTranslation.y);\n    t = t.scale(newScale);\n    return t;\n}\n\nexport function translateZoomBehaviorTransform(selection) {\n\n    // Translate the current zoom transform for the top level svg\n    // uniformly with the given selection, using the difference\n    // between the translation specified in the selection's data and\n    // it's saved previous translation. The selection is normally the\n    // top level g element of the graph.\n    this._zoomBehavior.transform(this._zoomSelection, getTranslatedZoomTransform.call(this, selection));\n\n    // Save the selections's new translation and scale.\n    this._translation = selection.datum().translation;\n    this._scale = selection.datum().scale;\n\n    // Set the original zoom transform to the translation and scale specified in\n    // the selection's data.\n    this._originalTransform = zoomIdentity.translate(selection.datum().translation.x, selection.datum().translation.y).scale(selection.datum().scale);\n}\n\nexport function resetZoom(transition) {\n\n    // Reset the zoom transform to the original zoom transform.\n    var selection = this._zoomSelection;\n    if (transition) {\n        selection = selection\n            .transition(transition);\n    }\n    selection\n        .call(this._zoomBehavior.transform, this._originalTransform);\n\n    return this;\n}\n\nexport function zoomScaleExtent(extent) {\n\n    this._options.zoomScaleExtent = extent;\n\n    return this;\n}\n\nexport function zoomTranslateExtent(extent) {\n\n    this._options.zoomTranslateExtent = extent;\n\n    return this;\n}\n\nexport function zoomBehavior() {\n  return this._zoomBehavior || null;\n}\n\nexport function zoomSelection() {\n  return this._zoomSelection || null;\n}\n","import {interpolate} from \"d3-interpolate\";\n\nexport function pathTween(points, d1) {\n    return function() {\n        const pointInterpolators = points.map(function(p) {\n            return interpolate([p[0][0], p[0][1]], [p[1][0], p[1][1]]);\n        });\n        return function(t) {\n            return t < 1 ? \"M\" + pointInterpolators.map(function(p) { return p(t); }).join(\"L\") : d1;\n        };\n    };\n}\n\nexport function pathTweenPoints(node, d1, precision, precisionIsRelative) {\n    const path0 = node;\n    const path1 = path0.cloneNode();\n    const n0 = path0.getTotalLength();\n    const n1 = (path1.setAttribute(\"d\", d1), path1).getTotalLength();\n\n    // Uniform sampling of distance based on specified precision.\n    const distances = [0];\n    let i = 0;\n    const dt = precisionIsRelative ? precision : precision / Math.max(n0, n1);\n    while ((i += dt) < 1) {\n      distances.push(i);\n    }\n    distances.push(1);\n\n    // Compute point-interpolators at each distance.\n    const points = distances.map(function(t) {\n        const p0 = path0.getPointAtLength(t * n0);\n        const p1 = path1.getPointAtLength(t * n1);\n        return ([[p0.x, p0.y], [p1.x, p1.y]]);\n    });\n    return points;\n}\n","export default function() {\n    return this._data || null;\n}\n\nexport function isEdgeElementParent(datum) {\n    return (datum.attributes.class == 'edge' || (\n        datum.tag == 'a' &&\n            datum.parent.tag == 'g' &&\n            datum.parent.parent.attributes.class == 'edge'\n    ));\n}\n\nexport function isEdgeElement(datum) {\n    return datum.parent && isEdgeElementParent(datum.parent);\n}\n\nexport function getEdgeGroup(datum) {\n    if (datum.parent.attributes.class == 'edge') {\n        return datum.parent;\n    } else { // datum.parent.tag == 'g' && datum.parent.parent.tag == 'g' && datum.parent.parent.parent.attributes.class == 'edge'\n        return datum.parent.parent.parent;\n    }\n}\n\nexport function getEdgeTitle(datum) {\n    return getEdgeGroup(datum).children.find(function (e) {\n        return e.tag == 'title';\n    });\n}\n","import * as d3 from \"d3-selection\";\nimport {transition} from \"d3-transition\";\nimport {timeout} from \"d3-timer\";\nimport {interpolateTransformSvg} from \"d3-interpolate\";\nimport {zoomTransform} from \"d3-zoom\";\nimport {createElement, extractElementData, replaceElement} from \"./element\";\nimport {shallowCopyObject} from \"./utils\";\nimport {createZoomBehavior, getTranslatedZoomTransform, translateZoomBehaviorTransform} from \"./zoom\";\nimport {pathTween} from \"./tweening\";\nimport {isEdgeElement} from \"./data\";\nimport {isEdgeElementParent} from \"./data\";\n\nexport default function(callback) {\n\n    if (this._busy) {\n        this._queue.push(this.render.bind(this, callback));\n        return this;\n    }\n    this._dispatch.call('renderStart', this);\n\n    if (this._transitionFactory) {\n        timeout(function () { // Decouple from time spent. See https://github.com/d3/d3-timer/issues/27\n            this._transition = transition(this._transitionFactory());\n            _render.call(this, callback);\n        }.bind(this), 0);\n    } else {\n        _render.call(this, callback);\n    }\n    return this;\n}\n\nfunction _render(callback) {\n\n    var transitionInstance = this._transition;\n    var fade = this._options.fade && transitionInstance != null;\n    var tweenPaths = this._options.tweenPaths;\n    var tweenShapes = this._options.tweenShapes;\n    var convertEqualSidedPolygons = this._options.convertEqualSidedPolygons;\n    var growEnteringEdges = this._options.growEnteringEdges && transitionInstance != null;\n    var attributer = this._attributer;\n    var graphvizInstance = this;\n\n    function insertChildren(element) {\n        var children = element.selectAll(function () {\n            return element.node().childNodes;\n        });\n\n        children = children\n          .data(function (d) {\n              return d.children;\n          }, function (d) {\n              return d.key;\n          });\n        var childrenEnter = children\n          .enter()\n          .append(function(d) {\n              var element = createElement(d);\n              if (d.tag == '#text' && fade) {\n                  element.nodeValue = d.text;\n              }\n              return element;\n          });\n\n        if (fade || (growEnteringEdges && isEdgeElementParent(element.datum()))) {\n            var childElementsEnter = childrenEnter\n                .filter(function(d) {\n                    return d.tag[0] == '#' ? null : this;\n                })\n                .each(function (d) {\n                    var childEnter = d3.select(this);\n                    for (var attributeName of Object.keys(d.attributes)) {\n                        var attributeValue = d.attributes[attributeName];\n                        childEnter\n                            .attr(attributeName, attributeValue);\n                    }\n                });\n            childElementsEnter\n              .filter(function(d) {\n                    return d.tag == 'svg' || d.tag == 'g' ? null : this;\n              })\n                .style(\"opacity\", 0.0);\n        }\n        var childrenExit = children\n          .exit();\n        if (attributer) {\n            childrenExit.each(attributer);\n        }\n        if (transitionInstance) {\n            childrenExit = childrenExit\n                .transition(transitionInstance);\n            if (fade) {\n                childrenExit\n                  .filter(function(d) {\n                      return d.tag[0] == '#' ? null : this;\n                  })\n                    .style(\"opacity\", 0.0);\n            }\n        }\n        childrenExit = childrenExit\n            .remove()\n        children = childrenEnter\n            .merge(children);\n        children.each(attributeElement);\n    }\n\n    function attributeElement(data) {\n        var element = d3.select(this);\n        if (data.tag == \"svg\") {\n            var options = graphvizInstance._options;\n            if (options.width != null || options.height != null) {\n                var width = options.width;\n                var height = options.height;\n                if (width == null) {\n                    width = data.attributes.width.replace('pt', '') * 4 / 3;\n                } else {\n                    element\n                        .attr(\"width\", width);\n                    data.attributes.width = width;\n                }\n                if (height == null) {\n                    height = data.attributes.height.replace('pt', '') * 4 / 3;\n                } else {\n                    element\n                        .attr(\"height\", height);\n                    data.attributes.height = height;\n                }\n                if (!options.fit) {\n                    element\n                        .attr(\"viewBox\", `0 0 ${width * 3 / 4 / options.scale} ${height * 3 / 4 / options.scale}`);\n                    data.attributes.viewBox = `0 0 ${width * 3 / 4 / options.scale} ${height * 3 / 4 / options.scale}`;\n                }\n            }\n            if (options.scale != 1 && (options.fit || (options.width == null && options.height == null))) {\n                width = data.attributes.viewBox.split(' ')[2];\n                height = data.attributes.viewBox.split(' ')[3];\n                element\n                    .attr(\"viewBox\", `0 0 ${width / options.scale} ${height / options.scale}`);\n                data.attributes.viewBox = `0 0 ${width / options.scale} ${height / options.scale}`;\n            }\n        }\n        if (attributer) {\n            element.each(attributer);\n        }\n        var tag = data.tag;\n        var attributes = data.attributes;\n        var currentAttributes = element.node().attributes;\n        if (currentAttributes) {\n            for (var i = 0; i < currentAttributes.length; i++) {\n                var currentAttribute = currentAttributes[i];\n                var name = currentAttribute.name;\n                if (name.split(':')[0] != 'xmlns' && currentAttribute.namespaceURI) {\n                    var namespaceURIParts = currentAttribute.namespaceURI.split('/');\n                    var namespace = namespaceURIParts[namespaceURIParts.length - 1];\n                    name = namespace + ':' + name;\n                }\n                if (!(name in attributes)) {\n                    attributes[name] = null;\n                }\n            }\n        }\n        var convertShape = false;\n        var convertPrevShape = false;\n        if (tweenShapes && transitionInstance) {\n            if ((this.nodeName == 'polygon' || this.nodeName == 'ellipse') && data.alternativeOld) {\n                convertPrevShape = true;\n            }\n            if ((tag == 'polygon' || tag == 'ellipse') && data.alternativeNew) {\n                convertShape = true;\n            }\n            if (this.nodeName == 'polygon' && tag == 'polygon' && data.alternativeOld) {\n                var prevData = extractElementData(element);\n                var prevPoints = prevData.attributes.points;\n                if (!convertEqualSidedPolygons) {\n                    var nPrevPoints = prevPoints.split(' ').length;\n                    var points = data.attributes.points;\n                    var nPoints = points.split(' ').length;\n                    if (nPoints == nPrevPoints) {\n                        convertShape = false;\n                        convertPrevShape = false;\n                    }\n                }\n            }\n            if (convertPrevShape) {\n                var prevPathData = data.alternativeOld;\n                var pathElement = replaceElement(element, prevPathData);\n                pathElement.data([data], function () {\n                    return data.key;\n                });\n                element = pathElement;\n            }\n            if (convertShape) {\n                var newPathData = data.alternativeNew;\n                tag = 'path';\n                attributes = newPathData.attributes;\n            }\n        }\n        var elementTransition = element;\n        if (transitionInstance) {\n            elementTransition = elementTransition\n                .transition(transitionInstance);\n            if (fade) {\n                elementTransition\n                  .filter(function(d) {\n                      return d.tag[0] == '#' ? null : this;\n                  })\n                    .style(\"opacity\", 1.0);\n            }\n            elementTransition\n              .filter(function(d) {\n                  return d.tag[0] == '#' ? null : this;\n              })\n                .on(\"end\", function(d) {\n                    d3.select(this)\n                        .attr('style', (d && d.attributes && d.attributes.style) || null);\n                });\n        }\n        var growThisPath = growEnteringEdges && tag == 'path' && data.offset;\n        if (growThisPath) {\n            var totalLength = data.totalLength;\n            element\n                .attr(\"stroke-dasharray\", totalLength + \" \" + totalLength)\n                .attr(\"stroke-dashoffset\", totalLength)\n                .attr('transform', 'translate(' + data.offset.x + ',' + data.offset.y + ')');\n            attributes[\"stroke-dashoffset\"] = 0;\n            attributes['transform'] = 'translate(0,0)';\n            elementTransition\n                .attr(\"stroke-dashoffset\", attributes[\"stroke-dashoffset\"])\n                .attr('transform', attributes['transform'])\n                .on(\"start\", function() {\n                    d3.select(this)\n                        .style('opacity', null);\n                })\n                .on(\"end\", function() {\n                    d3.select(this)\n                        .attr('stroke-dashoffset', null)\n                        .attr('stroke-dasharray', null)\n                        .attr('transform', null);\n                });\n        }\n        var moveThisPolygon = growEnteringEdges && tag == 'polygon' && isEdgeElement(data) && data.offset && data.parent.children[3].tag == 'path';\n        if (moveThisPolygon) {\n            var edgePath = d3.select(element.node().parentNode.querySelector(\"path\"));\n            var p0 = edgePath.node().getPointAtLength(0);\n            var p1 = edgePath.node().getPointAtLength(data.totalLength);\n            var p2 = edgePath.node().getPointAtLength(data.totalLength - 1);\n            var angle1 = Math.atan2(p1.y - p2.y, p1.x - p2.x) * 180 / Math.PI;\n            var x = p0.x - p1.x + data.offset.x;\n            var y = p0.y - p1.y + data.offset.y;\n            element\n                .attr('transform', 'translate(' + x + ',' + y + ')');\n            elementTransition\n                .attrTween(\"transform\", function () {\n                    return function (t) {\n                        var p = edgePath.node().getPointAtLength(data.totalLength * t);\n                        var p2 = edgePath.node().getPointAtLength(data.totalLength * t + 1);\n                        var angle = Math.atan2(p2.y - p.y, p2.x - p.x) * 180 / Math.PI - angle1;\n                        x = p.x - p1.x + data.offset.x * (1 - t);\n                        y = p.y - p1.y + data.offset.y * (1 - t);\n                        return 'translate(' + x + ',' + y + ') rotate(' + angle + ' ' + p1.x + ' ' + p1.y + ')';\n                    }\n                })\n                .on(\"start\", function() {\n                    d3.select(this)\n                        .style('opacity', null);\n                })\n                .on(\"end\", function() {\n                    d3.select(this).attr('transform', null);\n                });\n        }\n        var tweenThisPath = tweenPaths && transitionInstance && tag == 'path' && element.attr('d') != null;\n        for (var attributeName of Object.keys(attributes)) {\n            var attributeValue = attributes[attributeName];\n            if (tweenThisPath && attributeName == 'd') {\n                var points = (data.alternativeOld || data).points;\n                if (points) {\n                    elementTransition\n                        .attrTween(\"d\", pathTween(points, attributeValue));\n                }\n            } else {\n                if (attributeName == 'transform' && data.translation) {\n                    if (transitionInstance) {\n                        var onEnd = elementTransition.on(\"end\");\n                        elementTransition\n                            .on(\"start\", function () {\n                                if (graphvizInstance._zoomBehavior) {\n                                    // Update the transform to transition to, just before the transition starts\n                                    // in order to catch changes between the transition scheduling to its start.\n                                    elementTransition\n                                        .tween(\"attr.transform\", function() {\n                                            var node = this;\n                                            return function(t) {\n                                                node.setAttribute(\"transform\", interpolateTransformSvg(zoomTransform(graphvizInstance._zoomSelection.node()).toString(), getTranslatedZoomTransform.call(graphvizInstance, element).toString())(t));\n                                            };\n                                        });\n                                }\n                            })\n                            .on(\"end\", function () {\n                                onEnd.call(this);\n                                // Update the zoom transform to the new translated transform\n                                if (graphvizInstance._zoomBehavior) {\n                                    translateZoomBehaviorTransform.call(graphvizInstance, element);\n                                }\n                            })\n                    } else {\n                        if (graphvizInstance._zoomBehavior) {\n                            // Update the transform attribute to set with the current pan translation\n                            translateZoomBehaviorTransform.call(graphvizInstance, element);\n                            attributeValue = getTranslatedZoomTransform.call(graphvizInstance, element).toString();\n                        }\n                    }\n                }\n                elementTransition\n                    .attr(attributeName, attributeValue);\n            }\n        }\n        if (convertShape) {\n            elementTransition\n                .on(\"end\", function (d, i, nodes) {\n                    pathElement = d3.select(this);\n                    var newElement = replaceElement(pathElement, d);\n                    newElement.data([d], function () {\n                        return d.key;\n                    });\n                })\n        }\n        if (data.text) {\n            elementTransition\n                .text(data.text);\n        }\n        insertChildren(element);\n    }\n\n    var root = this._selection;\n\n    if (transitionInstance != null) {\n        // Ensure original SVG shape elements are restored after transition before rendering new graph\n        var jobs = this._jobs;\n        if (graphvizInstance._active) {\n            jobs.push(null);\n            return this;\n        } else {\n            root\n              .transition(transitionInstance)\n              .transition()\n                .duration(0)\n                .on(\"end\" , function () {\n                    graphvizInstance._active = false;\n                    if (jobs.length != 0) {\n                        jobs.shift();\n                        graphvizInstance.render();\n                    }\n                });\n            this._active = true;\n        }\n    }\n\n    if (transitionInstance != null) {\n        root\n          .transition(transitionInstance)\n            .on(\"start\" , function () {\n                graphvizInstance._dispatch.call('transitionStart', graphvizInstance);\n            })\n            .on(\"end\" , function () {\n                graphvizInstance._dispatch.call('transitionEnd', graphvizInstance);\n            })\n          .transition()\n            .duration(0)\n            .on(\"start\" , function () {\n                graphvizInstance._dispatch.call('restoreEnd', graphvizInstance);\n                graphvizInstance._dispatch.call('end', graphvizInstance);\n                if (callback) {\n                    callback.call(graphvizInstance);\n                }\n            });\n    }\n\n    var data = this._data;\n\n    var svg = root\n      .selectAll(\"svg\")\n        .data([data], function (d) {return d.key});\n    svg = svg\n      .enter()\n      .append(\"svg\")\n      .merge(svg);\n\n    attributeElement.call(svg.node(), data);\n\n\n    if (this._options.zoom && !this._zoomBehavior) {\n        createZoomBehavior.call(this);\n    }\n\n    graphvizInstance._dispatch.call('renderEnd', graphvizInstance);\n\n    if (transitionInstance == null) {\n        this._dispatch.call('end', this);\n        if (callback) {\n            callback.call(this);\n        }\n    }\n\n    return this;\n};\n","export default function() {\n    return this._graphvizVersion;\n};\n","import {shallowCopyObject} from \"./utils\";\nimport {roundTo2Decimals} from \"./utils\";\n\nexport function convertToPathData(originalData, guideData) {\n    if (originalData.tag == 'polygon') {\n        var newData = shallowCopyObject(originalData);\n        newData.tag = 'path';\n        var originalAttributes = originalData.attributes;\n        var newAttributes = shallowCopyObject(originalAttributes);\n        var newPointsString = originalAttributes.points;\n        if (guideData.tag == 'polygon') {\n            var bbox = originalData.bbox;\n            bbox.cx = bbox.x + bbox.width / 2;\n            bbox.cy = bbox.y + bbox.height / 2;\n            var pointsString = originalAttributes.points;\n            var pointStrings = pointsString.split(' ');\n            var normPoints = pointStrings.map(function(p) {var xy = p.split(','); return [xy[0] - bbox.cx, xy[1] - bbox.cy]});\n            var x0 = normPoints[normPoints.length - 1][0];\n            var y0 = normPoints[normPoints.length - 1][1];\n            for (var i = 0; i < normPoints.length; i++, x0 = x1, y0 = y1) {\n                var x1 = normPoints[i][0];\n                var y1 = normPoints[i][1];\n                var dx = x1 - x0;\n                var dy = y1 - y0;\n                if (dy == 0) {\n                    continue;\n                } else {\n                    var x2 = x0 - y0 * dx / dy;\n                }\n                if (0 <= x2 && x2 < Infinity && ((x0 <= x2 && x2 <= x1) || (x1 <= x2 && x2 <= x0))) {\n                    break;\n                }\n            }\n            var newPointStrings = [[bbox.cx + x2, bbox.cy + 0].join(',')];\n            newPointStrings = newPointStrings.concat(pointStrings.slice(i));\n            newPointStrings = newPointStrings.concat(pointStrings.slice(0, i));\n            newPointsString = newPointStrings.join(' ');\n        }\n        newAttributes['d'] = 'M' + newPointsString + 'z';\n        delete newAttributes.points;\n        newData.attributes = newAttributes;\n    } else /* if (originalData.tag == 'ellipse') */ {\n        var newData = shallowCopyObject(originalData);\n        newData.tag = 'path';\n        var originalAttributes = originalData.attributes;\n        var newAttributes = shallowCopyObject(originalAttributes);\n        var cx = originalAttributes.cx;\n        var cy = originalAttributes.cy;\n        var rx = originalAttributes.rx;\n        var ry = originalAttributes.ry;\n        if (guideData.tag == 'polygon') {\n            var bbox = guideData.bbox;\n            bbox.cx = bbox.x + bbox.width / 2;\n            bbox.cy = bbox.y + bbox.height / 2;\n            var p = guideData.attributes.points.split(' ')[0].split(',');\n            var sx = p[0];\n            var sy = p[1];\n            var dx = sx - bbox.cx;\n            var dy = sy - bbox.cy;\n            var l = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n            var cosA = dx / l;\n            var sinA = -dy / l;\n        } else { // if (guideData.tag == 'path') {\n            // FIXME: add support for getting start position from path\n            var cosA = 1;\n            var sinA = 0;\n        }\n        var x1 = rx * cosA;\n        var y1 = -ry * sinA;\n        var x2 = rx * (-cosA);\n        var y2 = -ry * (-sinA);\n        var dx = x2 - x1;\n        var dy = y2 - y1;\n        newAttributes['d'] = 'M '  +  cx + ' ' + cy + ' m ' + x1 + ',' + y1 + ' a ' + rx + ',' + ry + ' 0 1,0 ' + dx + ',' + dy + ' a ' + rx + ',' + ry + ' 0 1,0 ' + -dx + ',' + -dy + 'z';\n        delete newAttributes.cx;\n        delete newAttributes.cy;\n        delete newAttributes.rx;\n        delete newAttributes.ry;\n        newData.attributes = newAttributes;\n    }\n    return newData;\n}\n\nexport function translatePointsAttribute(pointsString, x, y) {\n    var pointStrings = pointsString.split(' ');\n    var points = pointStrings.map(function(p) {return p.split(',')});\n    var points = pointStrings.map(function(p) {return [roundTo2Decimals(+x + +p.split(',')[0]), roundTo2Decimals(+y + +p.split(',')[1])]});\n    var pointStrings = points.map(function(p) {return p.join(',')});\n    var pointsString = pointStrings.join(' ');\n    return pointsString;\n}\n\nexport function translateDAttribute(d, x, y) {\n    var pointStrings = d.split(/[A-Z ]/);\n    pointStrings.shift();\n    var commands = d.split(/[^[A-Z ]+/);\n    var points = pointStrings.map(function(p) {return p.split(',')});\n    var points = pointStrings.map(function(p) {return [roundTo2Decimals(+x + +p.split(',')[0]), roundTo2Decimals(+y + +p.split(',')[1])]});\n    var pointStrings = points.map(function(p) {return p.join(',')});\n    d = commands.reduce(function(arr, v, i) {\n        return arr.concat(v, pointStrings[i]);\n    }, []).join('');\n    return d;\n}\n","import { graphviz } from \"@hpcc-js/wasm\";\nimport { graphvizSync } from \"@hpcc-js/wasm\";\nimport * as d3 from \"d3-selection\";\nimport {extractAllElementsData, extractElementData, createElementWithAttributes} from \"./element\";\nimport {convertToPathData} from \"./svg\";\nimport {pathTweenPoints} from \"./tweening\";\nimport {isEdgeElement} from \"./data\";\nimport {getEdgeTitle} from \"./data\";\n\n\nexport function initViz() {\n\n    // force JIT compilation of @hpcc-js/wasm\n    try {\n        graphviz.layout(\"\", \"svg\", \"dot\").then(() => {\n            graphvizSync().then((graphviz1) => {\n                this.layoutSync = graphviz1.layout.bind(graphviz1);\n                if (this._worker == null) {\n                    this._dispatch.call(\"initEnd\", this);\n                }\n                if (this._afterInit) {\n                    this._afterInit();\n                }\n            });\n        });\n    } catch(error) {\n    }\n    if (this._worker != null) {\n        var vizURL = this._vizURL;\n        var graphvizInstance = this;\n        this._workerPort.onmessage = function(event) {\n            var callback = graphvizInstance._workerCallbacks.shift();\n            callback.call(graphvizInstance, event);\n        }\n        if (!vizURL.match(/^https?:\\/\\/|^\\/\\//i)) {\n            // Local URL. Prepend with local domain to be usable in web worker\n            vizURL = (new window.URL(vizURL, document.location.href)).href;\n        }\n        postMessage.call(this, {type: \"layout\", dot: \"\", engine: 'dot', vizURL: vizURL}, function (event) {\n            switch (event.data.type) {\n            case \"init\":\n                break;\n            }\n        });\n        postMessage.call(this, { type: \"version\" }, function (event) {\n            switch (event.data.type) {\n                case \"version\":\n                    graphvizInstance._graphvizVersion = event.data.version;\n                    graphvizInstance._dispatch.call(\"initEnd\", this);\n                    break;\n            }\n        });\n    }\n}\n\nfunction postMessage(message, callback) {\n    this._workerCallbacks.push(callback);\n    this._workerPort.postMessage(message);\n}\n\nexport function layout(src, engine, vizOptions, callback) {\n    if (this._worker) {\n        postMessage.call(this, {\n            type: \"layout\",\n            dot: src,\n            engine: engine,\n            options: vizOptions,\n        }, function (event) {\n            callback.call(this, event.data);\n        });\n    } else {\n        try {\n            var svgDoc = this.layoutSync(src, \"svg\", engine, vizOptions);\n            callback.call(this, {type: 'done', svg: svgDoc});\n        }\n        catch(error) {\n            callback.call(this, {type: 'error', error: error.message});\n        }\n    }\n}\n\nexport default function(src, callback) {\n\n    var graphvizInstance = this;\n    var worker = this._worker;\n    var engine = this._options.engine;\n    var images = this._images;\n\n    this._dispatch.call(\"start\", this);\n    this._busy = true;\n    this._dispatch.call(\"layoutStart\", this);\n    var vizOptions = {\n        images: images,\n    };\n    if (!this._worker && this.layoutSync == null) {\n        this._afterInit = this.dot.bind(this, src, callback);\n        return this;\n    }\n    this.layout(src, engine, vizOptions, function (data) {\n        switch (data.type) {\n        case \"error\":\n            if (graphvizInstance._onerror) {\n                graphvizInstance._onerror(data.error);\n            } else {\n                throw data.error.message\n            }\n            break;\n        case \"done\":\n            var svgDoc = data.svg;\n            layoutDone.call(this, svgDoc, callback);\n            break;\n        }\n    });\n\n    return this;\n};\n\nfunction layoutDone(svgDoc, callback) {\n    var keyMode = this._options.keyMode;\n    var tweenPaths = this._options.tweenPaths;\n    var tweenShapes = this._options.tweenShapes;\n    if (typeof this._options.tweenPrecision == 'string' && this._options.tweenPrecision.includes('%')) {\n        var tweenPrecision = +this._options.tweenPrecision.split('%')[0] / 100;\n        var tweenPrecisionIsRelative = this._options.tweenPrecision.includes('%');\n    } else {\n        var tweenPrecision = this._options.tweenPrecision;\n        var tweenPrecisionIsRelative = false;\n    }\n    var growEnteringEdges = this._options.growEnteringEdges;\n    var dictionary = {};\n    var prevDictionary = this._dictionary || {};\n    var nodeDictionary = {};\n    var prevNodeDictionary = this._nodeDictionary || {};\n\n    function setKey(datum, index) {\n        var tag = datum.tag;\n        if (keyMode == 'index') {\n            datum.key = index;\n        } else if (tag[0] != '#') {\n            if (keyMode == 'id') {\n                datum.key = datum.attributes.id;\n            } else if (keyMode == 'title') {\n                var title = datum.children.find(function (childData) {\n                    return childData.tag == 'title';\n                });\n                if (title) {\n                    if (title.children.length > 0) {\n                        datum.key = title.children[0].text;\n                    } else {\n                        datum.key = '';\n                    }\n                }\n            }\n        }\n        if (datum.key == null) {\n            if (tweenShapes) {\n                if (tag == 'ellipse' || tag == 'polygon') {\n                    tag = 'path';\n                }\n            }\n            datum.key = tag + '-' + index;\n        }\n    }\n\n    function setId(datum, parentData) {\n        var id = (parentData ? parentData.id + '.' : '') + datum.key;\n        datum.id = id;\n    }\n\n    function addToDictionary(datum) {\n        dictionary[datum.id] = datum;\n    }\n\n    function calculateAlternativeShapeData(datum, prevDatum) {\n        if (tweenShapes && datum.id in prevDictionary) {\n            if ((prevDatum.tag == 'polygon' || prevDatum.tag == 'ellipse' || prevDatum.tag == 'path') && (prevDatum.tag != datum.tag || datum.tag == 'polygon')) {\n                if (prevDatum.tag != 'path') {\n                    datum.alternativeOld = convertToPathData(prevDatum, datum);\n                }\n                if (datum.tag != 'path') {\n                    datum.alternativeNew = convertToPathData(datum, prevDatum);\n                }\n            }\n        }\n    }\n\n    function calculatePathTweenPoints(datum, prevDatum) {\n        if (tweenPaths && prevDatum && (prevDatum.tag == 'path' || (datum.alternativeOld && datum.alternativeOld.tag == 'path'))) {\n            var attribute_d = (datum.alternativeNew || datum).attributes.d;\n            if (datum.alternativeOld) {\n                var oldNode = createElementWithAttributes(datum.alternativeOld);\n            } else {\n                var oldNode = createElementWithAttributes(prevDatum);\n            }\n            (datum.alternativeOld || (datum.alternativeOld = {})).points = pathTweenPoints(oldNode, attribute_d, tweenPrecision, tweenPrecisionIsRelative);\n        }\n    }\n\n    function postProcessDataPass1Local(datum, index=0, parentData) {\n        setKey(datum, index);\n        setId(datum, parentData);\n        var id = datum.id;\n        var prevDatum = prevDictionary[id];\n        addToDictionary(datum);\n        calculateAlternativeShapeData(datum, prevDatum);\n        calculatePathTweenPoints(datum, prevDatum);\n        var childTagIndexes = {};\n        datum.children.forEach(function (childData) {\n            var childTag = childData.tag;\n            if (childTag == 'ellipse' || childTag == 'polygon') {\n                childTag = 'path';\n            }\n            if (childTagIndexes[childTag] == null) {\n                childTagIndexes[childTag] = 0;\n            }\n            var childIndex = childTagIndexes[childTag]++;\n            postProcessDataPass1Local(childData, childIndex, datum);\n        });\n    }\n\n    function addToNodeDictionary(datum) {\n        var tag = datum.tag;\n        if (growEnteringEdges && datum.parent) {\n            if (datum.parent.attributes.class == 'node') {\n                if (tag == 'title') {\n                    if (datum.children.length > 0) {\n                      var child = datum.children[0];\n                      var nodeId = child.text;\n                    } else {\n                      var nodeId = '';\n                    }\n                    nodeDictionary[nodeId] = datum.parent;\n                }\n            }\n        }\n    }\n\n    function extractGrowingEdgesData(datum) {\n        var id = datum.id;\n        var tag = datum.tag;\n        var prevDatum = prevDictionary[id];\n        if (growEnteringEdges && !prevDatum && datum.parent) {\n            if (isEdgeElement(datum)) {\n                if (tag == 'path' || tag == 'polygon') {\n                    if (tag == 'polygon') {\n                        var path = datum.parent.children.find(function (e) {\n                            return e.tag == 'path';\n                        });\n                        if (path) {\n                            datum.totalLength = path.totalLength;\n                        }\n                    }\n                    var title = getEdgeTitle(datum);\n                    var child = title.children[0];\n                    var nodeIds = child.text.split('->');\n                    if (nodeIds.length != 2) {\n                        nodeIds = child.text.split('--');\n                    }\n                    var startNodeId = nodeIds[0];\n                    var startNode = nodeDictionary[startNodeId];\n                    var prevStartNode = prevNodeDictionary[startNodeId];\n                    if (prevStartNode) {\n                        var i = startNode.children.findIndex(function (element, index) {\n                            return element.tag == 'g';\n                        });\n                        if (i >= 0) {\n                            var j = startNode.children[i].children.findIndex(function (element, index) {\n                                return element.tag == 'a';\n                            });\n                            startNode = startNode.children[i].children[j];\n                        }\n                        var i = prevStartNode.children.findIndex(function (element, index) {\n                            return element.tag == 'g';\n                        });\n                        if (i >= 0) {\n                            var j = prevStartNode.children[i].children.findIndex(function (element, index) {\n                                return element.tag == 'a';\n                            });\n                            prevStartNode = prevStartNode.children[i].children[j];\n                        }\n                        var startShapes = startNode.children;\n                        for (var i = 0; i < startShapes.length; i++) {\n                            if (startShapes[i].tag == 'polygon' || startShapes[i].tag == 'ellipse' || startShapes[i].tag == 'path' || startShapes[i].tag == 'text') {\n                                var startShape = startShapes[i];\n                                break;\n                            }\n                        }\n                        var prevStartShapes = prevStartNode.children;\n                        for (var i = 0; i < prevStartShapes.length; i++) {\n                            if (prevStartShapes[i].tag == 'polygon' || prevStartShapes[i].tag == 'ellipse' || prevStartShapes[i].tag == 'path' || prevStartShapes[i].tag == 'text') {\n                                var prevStartShape = prevStartShapes[i];\n                                break;\n                            }\n                        }\n                        if (prevStartShape && startShape) {\n                            datum.offset = {\n                                x: prevStartShape.center.x - startShape.center.x,\n                                y: prevStartShape.center.y - startShape.center.y,\n                            }\n                        } else {\n                            datum.offset = {x: 0, y: 0};\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    function postProcessDataPass2Global(datum) {\n        addToNodeDictionary(datum);\n        extractGrowingEdgesData(datum);\n        datum.children.forEach(function (childData) {\n            postProcessDataPass2Global(childData);\n        });\n    }\n\n    this._dispatch.call(\"layoutEnd\", this);\n\n    var newDoc = d3.select(document.createDocumentFragment())\n        .append('div');\n\n    var parser = new window.DOMParser();\n    var doc = parser.parseFromString(svgDoc, \"image/svg+xml\");\n\n    newDoc\n        .append(function() {\n            return doc.documentElement;\n        });\n\n    var newSvg = newDoc\n      .select('svg');\n\n    var data = extractAllElementsData(newSvg);\n    this._dispatch.call('dataExtractEnd', this);\n    postProcessDataPass1Local(data);\n    this._dispatch.call('dataProcessPass1End', this);\n    postProcessDataPass2Global(data);\n    this._dispatch.call('dataProcessPass2End', this);\n    this._data = data;\n    this._dictionary = dictionary;\n    this._nodeDictionary = nodeDictionary;\n\n    this._extractData = function (element, childIndex, parentData) {\n        var data = extractAllElementsData(element);\n        postProcessDataPass1Local(data, childIndex, parentData);\n        postProcessDataPass2Global(data);\n        return data;\n    }\n    this._busy = false;\n    this._dispatch.call('dataProcessEnd', this);\n    if (callback) {\n        callback.call(this);\n    }\n    if (this._queue.length > 0) {\n        var job = this._queue.shift();\n        job.call(this);\n    }\n}\n","export default function(src, callback) {\n\n    var graphvizInstance = this;\n\n    this\n        .dot(src, render);\n\n    function render() {\n        graphvizInstance\n            .render(callback);\n    }\n\n    return this;\n};\n","import {transition} from \"d3-transition\";\nimport {active as d3_active} from \"d3-transition\";\n\nexport default function(name) {\n\n    if (name instanceof Function) {\n        this._transitionFactory = name;\n    } else {\n        this._transition = transition(name);\n    }\n\n    return this;\n};\n\nexport function active(name) {\n\n    var root = this._selection;\n    var svg = root.selectWithoutDataPropagation(\"svg\");\n    if (svg.size() != 0) {\n        return d3_active(svg.node(), name);\n    } else {\n        return null;\n    }\n};\n","export default function(options) {\n\n    if (typeof options == 'undefined') {\n        return Object.assign({}, this._options);\n    } else {\n        for (var option of Object.keys(options)) {\n            this._options[option] = options[option];\n        }\n        return this;\n    }\n};\n","export default function(width) {\n\n    this._options.width = width;\n\n    return this;\n};\n","export default function(height) {\n\n    this._options.height = height;\n\n    return this;\n};\n","export default function(scale) {\n\n    this._options.scale = scale;\n\n    return this;\n};\n","export default function(fit) {\n\n    this._options.fit = fit;\n\n    return this;\n};\n","export default function(callback) {\n\n    this._attributer = callback;\n\n    return this;\n};\n","export default function(engine) {\n\n    this._options.engine = engine;\n\n    return this;\n};\n","export default function(path, width, height) {\n\n    this._images.push({path:path, width: width, height:height})\n\n    return this;\n};\n","export default function(keyMode) {\n\n    if (!this._keyModes.has(keyMode)) {\n        throw Error('Illegal keyMode: ' + keyMode);\n    }\n    if (keyMode != this._options.keyMode && this._data != null) {\n        throw Error('Too late to change keyMode');\n    }\n    this._options.keyMode = keyMode;\n\n    return this;\n};\n","export default function(enable) {\n\n    this._options.fade = enable\n\n    return this;\n};\n","export default function(enable) {\n\n    this._options.tweenPaths = enable;\n\n    return this;\n};\n","export default function(enable) {\n\n    this._options.tweenShapes = enable;\n    if (enable) {\n        this._options.tweenPaths = true;\n    }\n\n    return this;\n};\n","export default function(enable) {\n\n    this._options.convertEqualSidedPolygons = enable;\n\n    return this;\n};\n","export default function(precision) {\n\n    this._options.tweenPrecision = precision;\n\n    return this;\n};\n","export default function(enable) {\n\n    this._options.growEnteringEdges = enable;\n\n    return this;\n};\n","export default function(typenames, callback) {\n\n    this._dispatch.on(typenames, callback);\n\n    return this;\n};\n","export default function(callback) {\n\n    this._onerror = callback\n\n    return this;\n};\n","import {format} from \"d3-format\";\n\nexport default function(enable) {\n\n    var t0 = Date.now();\n    var times = {};\n    var eventTypes = this._eventTypes;\n    var maxEventTypeLength = Math.max(...(eventTypes.map(eventType => eventType.length)));\n    for (let i = 0; i < eventTypes.length; i++) {\n        let eventType = eventTypes[i];\n        times[eventType] = [];\n        var graphvizInstance = this;\n        var expectedDelay;\n        var expectedDuration;\n        this\n            .on(eventType + '.log', enable ? function () {\n                var t = Date.now();\n                var seqNo = times[eventType].length;\n                times[eventType].push(t);\n                var string = '';\n                string += 'Event ';\n                string += format(' >2')(i) + ' ';\n                string += eventType + ' '.repeat(maxEventTypeLength - eventType.length);\n                string += format(' >5')(t - t0) + ' ';\n                if (eventType != 'initEnd') {\n                    string += format(' >5')(t - times['start'][seqNo]);\n                }\n                if (eventType == 'dataProcessEnd') {\n                    string += ' prepare                 ' + format(' >5')((t - times['layoutEnd'][seqNo]));\n                }\n                if (eventType == 'renderEnd' && graphvizInstance._transition) {\n                    string += ' transition start margin ' + format(' >5')(graphvizInstance._transition.delay() - (t - times['renderStart'][seqNo]));\n                    expectedDelay = graphvizInstance._transition.delay();\n                    expectedDuration = graphvizInstance._transition.duration();\n                }\n                if (eventType == 'transitionStart') {\n                    var actualDelay = (t - times['renderStart'][seqNo])\n                    string += ' transition delay        ' + format(' >5')(t - times['renderStart'][seqNo]);\n                    string += ' expected ' + format(' >5')(expectedDelay);\n                    string += ' diff ' + format(' >5')(actualDelay - expectedDelay);\n                }\n                if (eventType == 'transitionEnd') {\n                    var actualDuration = t - times['transitionStart'][seqNo]\n                    string += ' transition duration     ' + format(' >5')(actualDuration);\n                    string += ' expected ' + format(' >5')(expectedDuration);\n                    string += ' diff ' + format(' >5')(actualDuration - expectedDuration);\n                }\n                console.log(string);\n                t0 = t;\n            } : null);\n    }\n    return this;\n}\n","export default function() {\n\n    delete this._selection.node().__graphviz__;\n    if (this._worker) {\n        this._workerPortClose();\n    }\n    return this;\n};\n","export function rotate(x, y, cosA, sinA) {\n    // (x + j * y) * (cosA + j * sinA) = x * cosA - y * sinA + j * (x * sinA + y * cosA)\n    y = -y;\n    sinA = -sinA;\n    [x, y] = [x * cosA - y * sinA, x * sinA + y * cosA];\n    y = -y;\n    return [x, y];\n}\n","import * as d3 from \"d3-selection\";\nimport {path as d3_path} from \"d3-path\";\nimport {rotate} from \"./geometry\";\nimport {extractAllElementsData} from \"./element\";\nimport {attributeElement} from \"./element\";\nimport {insertAllElementsData} from \"./element\";\n\nexport function drawEdge(x1, y1, x2, y2, attributes, options={}) {\n    attributes = Object.assign({}, attributes);\n    if (attributes.style && attributes.style.includes('invis')) {\n        var newEdge = d3.select(null);\n    } else {\n        var root = this._selection;\n        var svg = root.selectWithoutDataPropagation(\"svg\");\n        var graph0 = svg.selectWithoutDataPropagation(\"g\");\n        var newEdge0 = createEdge.call(this, attributes);\n        var edgeData = extractAllElementsData(newEdge0);\n        var newEdge = graph0.append('g')\n            .data([edgeData]);\n        attributeElement.call(newEdge.node(), edgeData);\n        _updateEdge.call(this, newEdge, x1, y1, x2, y2, attributes, options);\n    }\n    this._drawnEdge = {\n        g: newEdge,\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        attributes: attributes,\n    };\n\n    return this;\n}\n\nexport function updateDrawnEdge(x1, y1, x2, y2, attributes={}, options={}) {\n    if (!this._drawnEdge)  {\n        throw Error('No edge has been drawn');\n    }\n    var edge = this._drawnEdge.g\n    attributes = Object.assign(this._drawnEdge.attributes, attributes);\n    this._drawnEdge.x1 = x1;\n    this._drawnEdge.y1 = y1;\n    this._drawnEdge.x2 = x2;\n    this._drawnEdge.y2 = y2;\n    if (edge.empty() && !(attributes.style && attributes.style.includes('invis'))) {\n        var root = this._selection;\n        var svg = root.selectWithoutDataPropagation(\"svg\");\n        var graph0 = svg.selectWithoutDataPropagation(\"g\");\n        var edge = graph0.append('g');\n        this._drawnEdge.g = edge;\n    }\n    if (!edge.empty())  {\n      _updateEdge.call(this, edge, x1, y1, x2, y2, attributes, options);\n    }\n\n    return this;\n}\n\nfunction _updateEdge(edge, x1, y1, x2, y2, attributes, options) {\n\n    var newEdge = createEdge.call(this, attributes);\n    var edgeData = extractAllElementsData(newEdge);\n    edge.data([edgeData]);\n    attributeElement.call(edge.node(), edgeData);\n    _moveEdge(edge, x1, y1, x2, y2, attributes, options);\n}\n\nfunction _moveEdge(edge, x1, y1, x2, y2, attributes, options) {\n\n    var shortening = options.shortening || 0;\n    var arrowHeadLength = 10;\n    var arrowHeadWidth = 7;\n    var margin = 0.1;\n\n    var arrowHeadPoints = [\n        [0, -arrowHeadWidth / 2],\n        [arrowHeadLength, 0],\n        [0, arrowHeadWidth / 2],\n        [0, -arrowHeadWidth / 2],\n    ];\n\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var length = Math.sqrt(dx * dx + dy * dy);\n    if (length == 0) {\n        var cosA = 1;\n        var sinA = 0;\n    } else {\n        var cosA = dx / length;\n        var sinA = dy / length;\n    }\n    x2 = x1 + (length - shortening - arrowHeadLength - margin) * cosA;\n    y2 = y1 + (length - shortening - arrowHeadLength - margin) * sinA;\n\n    if (attributes.URL || attributes.tooltip) {\n        var a = edge.selectWithoutDataPropagation(\"g\").selectWithoutDataPropagation(\"a\");\n        var line = a.selectWithoutDataPropagation(\"path\");\n        var arrowHead = a.selectWithoutDataPropagation(\"polygon\");\n    } else {\n        var line = edge.selectWithoutDataPropagation(\"path\");\n        var arrowHead = edge.selectWithoutDataPropagation(\"polygon\");\n    }\n\n    var path1 = d3_path();\n    path1.moveTo(x1, y1);\n    path1.lineTo(x2, y2);\n\n    line\n        .attr(\"d\", path1);\n\n    x2 = x1 + (length - shortening - arrowHeadLength) * cosA;\n    y2 = y1 + (length - shortening - arrowHeadLength) * sinA;\n    for (var i = 0; i < arrowHeadPoints.length; i++) {\n        var point = arrowHeadPoints[i];\n        arrowHeadPoints[i] = rotate(point[0], point[1], cosA, sinA);\n    }\n    for (var i = 0; i < arrowHeadPoints.length; i++) {\n        var point = arrowHeadPoints[i];\n        arrowHeadPoints[i] = [x2 + point[0], y2 + point[1]];\n    }\n    var allPoints = [];\n    for (var i = 0; i < arrowHeadPoints.length; i++) {\n        var point = arrowHeadPoints[i];\n        allPoints.push(point.join(','));\n    }\n    var pointsAttr = allPoints.join(' ');\n\n    arrowHead\n        .attr(\"points\", pointsAttr);\n\n    return this;\n}\n\nexport function moveDrawnEdgeEndPoint(x2, y2, options={}) {\n\n    if (!this._drawnEdge)  {\n        throw Error('No edge has been drawn');\n    }\n    var edge = this._drawnEdge.g;\n    var x1 = this._drawnEdge.x1;\n    var y1 = this._drawnEdge.y1;\n    var attributes = this._drawnEdge.attributes;\n\n    this._drawnEdge.x2 = x2;\n    this._drawnEdge.y2 = y2;\n    _moveEdge(edge, x1, y1, x2, y2, attributes, options);\n\n    return this\n}\n\nexport function removeDrawnEdge() {\n\n    if (!this._drawnEdge)  {\n        return this;\n    }\n\n    var edge = this._drawnEdge.g;\n\n    edge.remove();\n\n    this._drawnEdge = null;\n\n    return this\n}\n\nexport function insertDrawnEdge(name) {\n\n    if (!this._drawnEdge)  {\n        throw Error('No edge has been drawn');\n    }\n\n    var edge = this._drawnEdge.g;\n    if (edge.empty())  {\n        return this;\n    }\n    var attributes = this._drawnEdge.attributes;\n\n    var title = edge.selectWithoutDataPropagation(\"title\");\n    title\n        .text(name);\n\n    var root = this._selection;\n    var svg = root.selectWithoutDataPropagation(\"svg\");\n    var graph0 = svg.selectWithoutDataPropagation(\"g\");\n    var graph0Datum = graph0.datum();\n    var edgeData = this._extractData(edge, graph0Datum.children.length, graph0.datum());\n    graph0Datum.children.push(edgeData);\n\n    insertAllElementsData(edge, edgeData);\n\n    this._drawnEdge = null;\n\n    return this\n\n}\n\nexport function drawnEdgeSelection() {\n\n  if (this._drawnEdge) {\n    return this._drawnEdge.g;\n  } else {\n    return d3.select(null);\n  }\n\n}\n\n\nfunction createEdge(attributes) {\n    var attributesString = ''\n    for (var name of Object.keys(attributes)) {\n        if (attributes[name] != null) {\n            attributesString += ' \"' + name + '\"=\"' + attributes[name] + '\"';\n        }\n    }\n    var dotSrc = 'digraph {a -> b [' + attributesString + ']}';\n    var svgDoc = this.layoutSync(dotSrc, 'svg', 'dot');\n    var parser = new window.DOMParser();\n    var doc = parser.parseFromString(svgDoc, \"image/svg+xml\");\n    var newDoc = d3.select(document.createDocumentFragment())\n        .append(function() {\n            return doc.documentElement;\n        });\n    var edge = newDoc.select('.edge');\n\n    return edge;\n}\n","import * as d3 from \"d3-selection\";\nimport {rotate} from \"./geometry\";\nimport {extractAllElementsData} from \"./element\";\nimport {translatePointsAttribute} from \"./svg\";\nimport {translateDAttribute} from \"./svg\";\nimport {insertAllElementsData} from \"./element\";\nimport {attributeElement} from \"./element\";\nimport {roundTo2Decimals} from \"./utils\";\n\nexport function drawNode(x, y, nodeId, attributes={}, options={}) {\n    attributes = Object.assign({}, attributes);\n    if (attributes.style && attributes.style.includes('invis')) {\n        var newNode = d3.select(null);\n    } else {\n        var root = this._selection;\n        var svg = root.selectWithoutDataPropagation(\"svg\");\n        var graph0 = svg.selectWithoutDataPropagation(\"g\");\n        var newNode0 = createNode.call(this, nodeId, attributes);\n        var nodeData = extractAllElementsData(newNode0);\n        var newNode = graph0.append('g')\n            .data([nodeData]);\n        attributeElement.call(newNode.node(), nodeData);\n        _updateNode.call(this, newNode, x, y, nodeId, attributes, options);\n    }\n    this._drawnNode = {\n        g: newNode,\n        nodeId: nodeId,\n        x: x,\n        y: y,\n        attributes: attributes,\n    };\n\n    return this;\n}\n\nexport function updateDrawnNode(x, y, nodeId, attributes={}, options={}) {\n    if (!this._drawnNode)  {\n        throw Error('No node has been drawn');\n    }\n\n    var node = this._drawnNode.g\n    if (nodeId == null) {\n        nodeId = this._drawnNode.nodeId;\n    }\n    attributes = Object.assign(this._drawnNode.attributes, attributes);\n    this._drawnNode.nodeId = nodeId;\n    this._drawnNode.x = x;\n    this._drawnNode.y = y;\n    if (node.empty() && !(attributes.style && attributes.style.includes('invis'))) {\n        var root = this._selection;\n        var svg = root.selectWithoutDataPropagation(\"svg\");\n        var graph0 = svg.selectWithoutDataPropagation(\"g\");\n        var node = graph0.append('g');\n        this._drawnNode.g = node;\n    }\n    if (!node.empty())  {\n      _updateNode.call(this, node, x, y, nodeId, attributes, options);\n    }\n\n    return this;\n}\n\nfunction _updateNode(node, x, y, nodeId, attributes, options) {\n\n    var newNode = createNode.call(this, nodeId, attributes);\n    var nodeData = extractAllElementsData(newNode);\n    node.data([nodeData]);\n    attributeElement.call(node.node(), nodeData);\n    _moveNode(node, x, y, attributes, options);\n\n    return this;\n}\n\nfunction _moveNode(node, x, y, attributes, options) {\n    if (attributes.URL || attributes.tooltip) {\n        var subParent = node.selectWithoutDataPropagation(\"g\").selectWithoutDataPropagation(\"a\");\n    } else {\n        var subParent = node;\n    }\n    var svgElements = subParent.selectAll('ellipse,polygon,path,polyline');\n    var text = node.selectWithoutDataPropagation(\"text\");\n\n    if (svgElements.size() != 0) {\n        var bbox = svgElements.node().getBBox();\n        bbox.cx = bbox.x + bbox.width / 2;\n        bbox.cy = bbox.y + bbox.height / 2;\n    } else if (text.size() != 0) {\n        bbox = {\n            x: +text.attr('x'),\n            y: +text.attr('y'),\n            width: 0,\n            height: 0,\n            cx: +text.attr('x'),\n            cy: +text.attr('y'),\n        }\n    }\n    svgElements.each(function(data, index) {\n        var svgElement = d3.select(this);\n        if (svgElement.attr(\"cx\")) {\n            svgElement\n                .attr(\"cx\", roundTo2Decimals(x))\n                .attr(\"cy\", roundTo2Decimals(y));\n        } else if (svgElement.attr(\"points\")) {\n            var pointsString = svgElement.attr('points').trim();\n            svgElement\n                .attr(\"points\", translatePointsAttribute(pointsString, x - bbox.cx, y - bbox.cy));\n        } else {\n            var d = svgElement.attr('d');\n            svgElement\n                .attr(\"d\", translateDAttribute(d, x - bbox.cx, y - bbox.cy));\n        }\n    });\n\n    if (text.size() != 0) {\n        text\n            .attr(\"x\", roundTo2Decimals(+text.attr(\"x\") + x - bbox.cx))\n            .attr(\"y\", roundTo2Decimals(+text.attr(\"y\") + y - bbox.cy));\n    }\n    return this;\n}\n\nexport function moveDrawnNode(x, y, options={}) {\n\n    if (!this._drawnNode)  {\n        throw Error('No node has been drawn');\n    }\n    var node = this._drawnNode.g;\n    var attributes = this._drawnNode.attributes;\n\n    this._drawnNode.x = x;\n    this._drawnNode.y = y;\n\n    if (!node.empty())  {\n        _moveNode(node, x, y, attributes, options);\n    }\n\n    return this\n}\n\nexport function removeDrawnNode() {\n\n    if (!this._drawnNode)  {\n        return this;\n    }\n\n    var node = this._drawnNode.g;\n\n    if (!node.empty())  {\n        node.remove();\n    }\n\n    this._drawnNode = null;\n\n    return this\n}\n\nexport function insertDrawnNode(nodeId) {\n\n    if (!this._drawnNode)  {\n        throw Error('No node has been drawn');\n    }\n\n    if (nodeId == null) {\n        nodeId = this._drawnNode.nodeId;\n    }\n    var node = this._drawnNode.g;\n    if (node.empty())  {\n        return this;\n    }\n    var attributes = this._drawnNode.attributes;\n\n    var title = node.selectWithoutDataPropagation(\"title\");\n    title\n        .text(nodeId);\n    if (attributes.URL || attributes.tooltip) {\n        var ga = node.selectWithoutDataPropagation(\"g\");\n        var a = ga.selectWithoutDataPropagation(\"a\");\n        var svgElement = a.selectWithoutDataPropagation('ellipse,polygon,path,polyline');\n        var text = a.selectWithoutDataPropagation('text');\n    } else {\n        var svgElement = node.selectWithoutDataPropagation('ellipse,polygon,path,polyline');\n        var text = node.selectWithoutDataPropagation('text');\n    }\n    text\n        .text(attributes.label || nodeId);\n\n    var root = this._selection;\n    var svg = root.selectWithoutDataPropagation(\"svg\");\n    var graph0 = svg.selectWithoutDataPropagation(\"g\");\n    var graph0Datum = graph0.datum();\n    var nodeData = this._extractData(node, graph0Datum.children.length, graph0.datum());\n    graph0Datum.children.push(nodeData);\n\n    insertAllElementsData(node, nodeData);\n\n    this._drawnNode = null;\n\n    return this\n\n}\n\nexport function drawnNodeSelection() {\n\n  if (this._drawnNode) {\n    return this._drawnNode.g;\n  } else {\n    return d3.select(null);\n  }\n\n}\n\nfunction createNode(nodeId, attributes) {\n    var attributesString = ''\n    for (var name of Object.keys(attributes)) {\n        if (attributes[name] != null) {\n            attributesString += ' \"' + name + '\"=\"' + attributes[name] + '\"';\n        }\n    }\n    var dotSrc = 'graph {\"' + nodeId + '\" [' + attributesString + ']}';\n    var svgDoc = this.layoutSync(dotSrc, 'svg', 'dot');\n    var parser = new window.DOMParser();\n    var doc = parser.parseFromString(svgDoc, \"image/svg+xml\");\n    var newDoc = d3.select(document.createDocumentFragment())\n        .append(function() {\n            return doc.documentElement;\n        });\n    var node = newDoc.select('.node');\n\n    return node;\n}\n","/* This file is excluded from coverage because the intrumented code\n * translates \"self\" which gives a reference error.\n */\n\n/* istanbul ignore next */\n\nexport function workerCodeBody(port) {\n\n    self.document = {}; // Workaround for \"ReferenceError: document is not defined\" in hpccWasm\n\n    port.addEventListener('message', function(event) {\n        let hpccWasm = self[\"@hpcc-js/wasm\"];\n        if (hpccWasm == undefined && event.data.vizURL) {\n            importScripts(event.data.vizURL);\n            hpccWasm = self[\"@hpcc-js/wasm\"];\n            hpccWasm.wasmFolder(event.data.vizURL.match(/.*\\//)[0]);\n            // This is an alternative workaround where wasmFolder() is not needed\n//                                    document = {currentScript: {src: event.data.vizURL}};\n        }\n\n        if (event.data.type == \"version\") {\n            hpccWasm.graphvizVersion().then((version) => {\n                port.postMessage({\n                    type: \"version\",\n                    version: version,\n                });\n            });\n            return;\n        }\n\n        hpccWasm.graphviz.layout(event.data.dot, \"svg\", event.data.engine, event.data.options).then((svg) => {\n            if (svg) {\n                port.postMessage({\n                    type: \"done\",\n                    svg: svg,\n                });\n            } else if (event.data.vizURL) {\n                port.postMessage({\n                    type: \"init\",\n                });\n            } else {\n                port.postMessage({\n                    type: \"skip\",\n                });\n            }\n        }).catch(error => {\n            port.postMessage({\n                type: \"error\",\n                error: error.message,\n            });\n        });\n    });\n}\n\n/* istanbul ignore next */\n\nexport function workerCode() {\n\n    const port = self;\n    workerCodeBody(port);\n}\n\n/* istanbul ignore next */\n\nexport function sharedWorkerCode() {\n    self.onconnect = function(e) {\n        const port = e.ports[0];\n        workerCodeBody(port);\n        port.start();\n    }\n}\n","import * as d3 from \"d3-selection\";\nimport {dispatch} from \"d3-dispatch\";\nimport render from \"./render\";\nimport graphvizVersion from \"./graphvizVersion\";\nimport {layout} from \"./dot\";\nimport dot from \"./dot\";\nimport data from \"./data\";\nimport {initViz} from \"./dot\";\nimport renderDot from \"./renderDot\";\nimport transition from \"./transition\";\nimport {active} from \"./transition\";\nimport options from \"./options\";\nimport width from \"./width\";\nimport height from \"./height\";\nimport scale from \"./scale\";\nimport fit from \"./fit\";\nimport attributer from \"./attributer\";\nimport engine from \"./engine\";\nimport images from \"./images\";\nimport keyMode from \"./keyMode\";\nimport fade from \"./fade\";\nimport tweenPaths from \"./tweenPaths\";\nimport tweenShapes from \"./tweenShapes\";\nimport convertEqualSidedPolygons from \"./convertEqualSidedPolygons\";\nimport tweenPrecision from \"./tweenPrecision\";\nimport growEnteringEdges from \"./growEnteringEdges\";\nimport zoom from \"./zoom\";\nimport {resetZoom} from \"./zoom\";\nimport {zoomBehavior} from \"./zoom\";\nimport {zoomSelection} from \"./zoom\";\nimport {zoomScaleExtent} from \"./zoom\";\nimport {zoomTranslateExtent} from \"./zoom\";\nimport on from \"./on\";\nimport onerror from \"./onerror\";\nimport logEvents from \"./logEvents\";\nimport destroy from \"./destroy\";\nimport {drawEdge} from \"./drawEdge\";\nimport {updateDrawnEdge} from \"./drawEdge\";\nimport {moveDrawnEdgeEndPoint} from \"./drawEdge\";\nimport {insertDrawnEdge} from \"./drawEdge\";\nimport {removeDrawnEdge} from \"./drawEdge\";\nimport {drawnEdgeSelection} from \"./drawEdge\";\nimport {drawNode} from \"./drawNode\";\nimport {updateDrawnNode} from \"./drawNode\";\nimport {moveDrawnNode} from \"./drawNode\";\nimport {insertDrawnNode} from \"./drawNode\";\nimport {removeDrawnNode} from \"./drawNode\";\nimport {drawnNodeSelection} from \"./drawNode\";\nimport {workerCode} from \"./workerCode\";\nimport {sharedWorkerCode} from \"./workerCode\";\nimport {workerCodeBody} from \"./workerCode\";\nimport {graphvizVersion as hpccWasmGraphvizVersion} from \"@hpcc-js/wasm\";\n\nexport function Graphviz(selection, options) {\n    this._options = {\n        useWorker: true,\n        useSharedWorker: false,\n        engine: 'dot',\n        keyMode: 'title',\n        fade: true,\n        tweenPaths: true,\n        tweenShapes: true,\n        convertEqualSidedPolygons: true,\n        tweenPrecision: 1,\n        growEnteringEdges: true,\n        zoom: true,\n        zoomScaleExtent: [0.1, 10],\n        zoomTranslateExtent: [[-Infinity, -Infinity], [+Infinity, +Infinity]],\n        width: null,\n        height: null,\n        scale: 1,\n        fit: false,\n    };\n    if (options instanceof Object) {\n        for (var option of Object.keys(options)) {\n            this._options[option] = options[option];\n        }\n    } else if (typeof options == 'boolean') {\n        this._options.useWorker = options;\n    }\n    var useWorker = this._options.useWorker;\n    var useSharedWorker = this._options.useSharedWorker;\n    if (typeof Worker == 'undefined') {\n        useWorker = false;\n    }\n    if (typeof SharedWorker == 'undefined') {\n        useSharedWorker = false;\n    }\n    if (useWorker || useSharedWorker) {\n        var scripts = d3.selectAll('script');\n        var vizScript = scripts.filter(function() {\n            return d3.select(this).attr('type') == 'javascript/worker' || (d3.select(this).attr('src') && d3.select(this).attr('src').match(/.*\\/@hpcc-js\\/wasm/));\n        });\n        if (vizScript.size() == 0) {\n            console.warn('No script tag of type \"javascript/worker\" was found and \"useWorker\" is true. Not using web worker.');\n            useWorker = false;\n            useSharedWorker = false;\n        } else {\n            this._vizURL = vizScript.attr('src');\n            if (!this._vizURL) {\n                console.warn('No \"src\" attribute of was found on the \"javascript/worker\" script tag and \"useWorker\" is true. Not using web worker.');\n                useWorker = false;\n                useSharedWorker = false;\n            }\n        }\n    }\n    if (useSharedWorker) {\n        const url = 'data:application/javascript;base64,' + btoa(workerCodeBody.toString() + '(' + sharedWorkerCode.toString() + ')()');\n        this._worker = this._worker = new SharedWorker(url);\n        this._workerPort = this._worker.port;\n        this._workerPortClose = this._worker.port.close.bind(this._workerPort);\n        this._worker.port.start();\n        this._workerCallbacks = [];\n    }\n    else if (useWorker) {\n        var blob = new Blob([workerCodeBody.toString() + '(' + workerCode.toString() + ')()']);\n        var blobURL = window.URL.createObjectURL(blob);\n        this._worker = new Worker(blobURL);\n        this._workerPort = this._worker;\n        this._workerPortClose = this._worker.terminate.bind(this._worker);\n        this._workerCallbacks = [];\n    } else {\n        hpccWasmGraphvizVersion().then(((version) => {\n            this._graphvizVersion = version;\n        }).bind(this));\n    }\n    this._selection = selection;\n    this._active = false;\n    this._busy = false;\n    this._jobs = [];\n    this._queue = [];\n    this._keyModes = new Set([\n        'title',\n        'id',\n        'tag-index',\n        'index'\n    ]);\n    this._images = [];\n    this._translation = undefined;\n    this._scale = undefined;\n    this._eventTypes = [\n        'initEnd',\n        'start',\n        'layoutStart',\n        'layoutEnd',\n        'dataExtractEnd',\n        'dataProcessPass1End',\n        'dataProcessPass2End',\n        'dataProcessEnd',\n        'renderStart',\n        'renderEnd',\n        'transitionStart',\n        'transitionEnd',\n        'restoreEnd',\n        'end',\n        'zoom'\n    ];\n    this._dispatch = dispatch(...this._eventTypes);\n    initViz.call(this);\n    selection.node().__graphviz__ = this;\n}\n\nexport default function graphviz(selector, options) {\n    var g = d3.select(selector).graphviz(options);\n    return g;\n}\n\nGraphviz.prototype = graphviz.prototype = {\n    constructor: Graphviz,\n    engine: engine,\n    addImage: images,\n    keyMode: keyMode,\n    fade: fade,\n    tweenPaths: tweenPaths,\n    tweenShapes: tweenShapes,\n    convertEqualSidedPolygons: convertEqualSidedPolygons,\n    tweenPrecision: tweenPrecision,\n    growEnteringEdges: growEnteringEdges,\n    zoom: zoom,\n    resetZoom: resetZoom,\n    zoomBehavior: zoomBehavior,\n    zoomSelection: zoomSelection,\n    zoomScaleExtent: zoomScaleExtent,\n    zoomTranslateExtent: zoomTranslateExtent,\n    render: render,\n    layout: layout,\n    dot: dot,\n    data: data,\n    renderDot: renderDot,\n    transition: transition,\n    active: active,\n    options: options,\n    width: width,\n    height: height,\n    scale: scale,\n    fit: fit,\n    attributer: attributer,\n    on: on,\n    onerror: onerror,\n    logEvents: logEvents,\n    destroy: destroy,\n    drawEdge: drawEdge,\n    updateDrawnEdge: updateDrawnEdge,\n    moveDrawnEdgeEndPoint,\n    insertDrawnEdge,\n    removeDrawnEdge, removeDrawnEdge,\n    drawnEdgeSelection, drawnEdgeSelection,\n    drawNode: drawNode,\n    updateDrawnNode: updateDrawnNode,\n    moveDrawnNode: moveDrawnNode,\n    insertDrawnNode,\n    removeDrawnNode, removeDrawnNode,\n    drawnNodeSelection, drawnNodeSelection,\n    graphvizVersion: graphvizVersion,\n};\n","import {Graphviz} from \"../graphviz\";\nimport {timeout} from \"d3-timer\";\n\nexport default function(options) {\n\n    var g = this.node().__graphviz__;\n    if (g) {\n        g.options(options);\n        // Ensure a possible new initEnd event handler is attached before calling it\n        timeout(function () {\n            g._dispatch.call(\"initEnd\", this);\n        }.bind(this), 0);\n    } else {\n        g = new Graphviz(this, options);\n    }\n    return g;\n}\n","import * as d3 from \"d3-selection\";\n\nexport default function(name) {\n\n    return d3.select(this.size() > 0 ? this.node().querySelector(name) : null);\n}\n","import {selection} from \"d3-selection\";\nimport selection_graphviz from \"./graphviz\";\nimport selection_selectWithoutDataPropagation from \"./selectWithoutDataPropagation\";\n\nselection.prototype.graphviz = selection_graphviz;\nselection.prototype.selectWithoutDataPropagation = selection_selectWithoutDataPropagation;\n"],"names":["extractElementData","element","datum","tag","node","nodeName","text","comment","attributes","i","length","attribute","name","value","transform","baseVal","numberOfItems","matrix","consolidate","translation","x","e","y","f","scale","a","center","cx","cy","points","attr","split","map","p","xmin","Math","min","apply","xmax","max","ymin","ymax","bbox","width","height","d","shift","totalLength","getTotalLength","extractAllElementsData","children","d3","selectAll","childNodes","each","childData","select","parent","push","createElement","data","document","createTextNode","createComment","createElementNS","createElementWithAttributes","elementNode","Object","keys","attributeName","attributeValue","replaceElement","parentNode","newElementNode","newElement","insert","remove","insertElementData","key","insertAllElementsData","insertChildren","index","childrenEnter","enter","append","childrenExit","exit","merge","childTagIndexes","childTag","childIndex","attributeElement","call","currentAttributes","currentAttribute","namespaceURI","namespaceURIParts","namespace","shallowCopyObject","obj","assign","roundTo2Decimals","round","enable","_options","zoom","_zoomBehavior","createZoomBehavior","_zoomSelection","on","graphvizInstance","zoomed","event","g","svg","querySelector","_dispatch","root","_selection","size","zoomBehavior","scaleExtent","zoomScaleExtent","translateExtent","zoomTranslateExtent","interpolate","_active","translateZoomBehaviorTransform","_originalTransform","zoomTransform","getTranslatedZoomTransform","selection","oldTranslation","_translation","oldScale","_scale","newTranslation","newScale","t","translate","zoomIdentity","resetZoom","transition","extent","zoomSelection","pathTween","d1","pointInterpolators","join","pathTweenPoints","precision","precisionIsRelative","path0","path1","cloneNode","n0","n1","setAttribute","distances","dt","p0","getPointAtLength","p1","_data","isEdgeElementParent","isEdgeElement","getEdgeGroup","getEdgeTitle","find","callback","_busy","_queue","render","bind","_transitionFactory","timeout","_transition","_render","transitionInstance","fade","tweenPaths","tweenShapes","convertEqualSidedPolygons","growEnteringEdges","attributer","_attributer","nodeValue","childElementsEnter","filter","childEnter","style","options","replace","fit","viewBox","convertShape","convertPrevShape","alternativeOld","alternativeNew","prevData","prevPoints","nPrevPoints","nPoints","prevPathData","pathElement","newPathData","elementTransition","growThisPath","offset","moveThisPolygon","edgePath","p2","angle1","atan2","PI","attrTween","angle","tweenThisPath","onEnd","tween","interpolateTransformSvg","toString","nodes","jobs","_jobs","duration","_graphvizVersion","convertToPathData","originalData","guideData","newData","originalAttributes","newAttributes","newPointsString","pointsString","pointStrings","normPoints","xy","x0","y0","x1","y1","dx","dy","x2","Infinity","newPointStrings","concat","slice","rx","ry","sx","sy","l","sqrt","pow","cosA","sinA","y2","translatePointsAttribute","translateDAttribute","commands","reduce","arr","v","initViz","graphviz","layout","then","graphvizSync","graphviz1","layoutSync","_worker","_afterInit","error","vizURL","_vizURL","_workerPort","onmessage","_workerCallbacks","match","window","URL","location","href","postMessage","type","dot","engine","version","message","src","vizOptions","svgDoc","images","_images","_onerror","layoutDone","keyMode","tweenPrecision","includes","tweenPrecisionIsRelative","dictionary","prevDictionary","_dictionary","nodeDictionary","prevNodeDictionary","_nodeDictionary","setKey","id","title","setId","parentData","addToDictionary","calculateAlternativeShapeData","prevDatum","calculatePathTweenPoints","attribute_d","oldNode","postProcessDataPass1Local","forEach","addToNodeDictionary","child","nodeId","extractGrowingEdgesData","path","nodeIds","startNodeId","startNode","prevStartNode","findIndex","j","startShapes","startShape","prevStartShapes","prevStartShape","postProcessDataPass2Global","newDoc","createDocumentFragment","parser","DOMParser","doc","parseFromString","documentElement","newSvg","_extractData","job","Function","active","selectWithoutDataPropagation","d3_active","option","_keyModes","has","Error","typenames","t0","Date","now","times","eventTypes","_eventTypes","maxEventTypeLength","eventType","seqNo","string","format","repeat","delay","expectedDelay","expectedDuration","actualDelay","actualDuration","console","log","__graphviz__","_workerPortClose","rotate","drawEdge","newEdge","graph0","newEdge0","createEdge","edgeData","_updateEdge","_drawnEdge","updateDrawnEdge","edge","empty","_moveEdge","shortening","arrowHeadLength","arrowHeadWidth","margin","arrowHeadPoints","tooltip","line","arrowHead","d3_path","moveTo","lineTo","point","allPoints","pointsAttr","moveDrawnEdgeEndPoint","removeDrawnEdge","insertDrawnEdge","graph0Datum","drawnEdgeSelection","attributesString","dotSrc","drawNode","newNode","newNode0","createNode","nodeData","_updateNode","_drawnNode","updateDrawnNode","_moveNode","subParent","svgElements","getBBox","svgElement","trim","moveDrawnNode","removeDrawnNode","insertDrawnNode","ga","label","drawnNodeSelection","workerCodeBody","port","self","addEventListener","hpccWasm","undefined","importScripts","wasmFolder","graphvizVersion","workerCode","sharedWorkerCode","onconnect","ports","start","Graphviz","useWorker","useSharedWorker","Worker","SharedWorker","scripts","vizScript","warn","url","btoa","close","blob","Blob","blobURL","createObjectURL","terminate","hpccWasmGraphvizVersion","Set","dispatch","selector","prototype","constructor","addImage","renderDot","onerror","logEvents","destroy","selection_graphviz","selection_selectWithoutDataPropagation"],"mappings":"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"}